(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(45)},41:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(13),s=n.n(c),o=n(8),r=n(9),l=n(11),u=n(10),h=n(12),d=n(51),f=n(53),p=n(54),v=n(46),m=n(47),b=n(16),k=new(function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).socket=null,e.pin=null,e}return Object(h.a)(t,e),Object(r.a)(t,[{key:"connect",value:function(){var e=this;if(!this.isConnected){var t=this.getSocketURL();this.socket=new WebSocket(t),this.socket.addEventListener("open",function(){e.emit("connected")}),this.socket.addEventListener("message",this.onData.bind(this)),this.socket.addEventListener("error",function(){e.emit("error")}),this.socket.addEventListener("close",function(){e.emit("close")})}}},{key:"onData",value:function(e){var t=this;e.data.split("*!*").forEach(function(e){var n,a;try{var i=JSON.parse(e);n=i.type||null,a=i.data||null}catch(c){return}t.processResponse(n,a)})}},{key:"processResponse",value:function(e,t){switch(e){case"chat":var n=t.text,a=t.from;this.emit("chat",{text:n,from:a});break;case"pin":var i=t.pin;this.pin=i,this.emit("pin");break;case"all-users":var c=t.userPins;this.emit("all-users",{userPins:c})}}},{key:"sendChat",value:function(e){this.send("chat",{text:e})}},{key:"getAllUsers",value:function(){this.send("all-users")}},{key:"send",value:function(e,t){this.isConnected&&this.socket.send(JSON.stringify({type:e,data:t})+"*!*")}},{key:"close",value:function(){this.isConnected&&this.socket.close()}},{key:"getSocketURL",value:function(){var e=window.location.origin.includes("https:")?"wss:":"ws:";switch(window.location.origin){case"file://":e+="//electronchat.herokuapp.com/";break;case"localhost":default:e+="localhost:8080"}return e}},{key:"isConnected",get:function(){return!!this.socket&&1===this.socket.readyState}}]),t}(b.EventEmitter)),O=new(function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(r.a)(t,[{key:"modal",value:function(e,t,n){this.emit("modal",{header:e,body:t,footer:n})}}]),t}(b.EventEmitter)),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,pending:!0},n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){k.on("all-users",function(e){var t=e.userPins,n=void 0===t?[]:t;O.modal("Online Users (".concat(n.length,")"),n.join(", "))})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"findAllUsers",value:function(){this.lockUI(),k.getAllUsers()}},{key:"lockUI",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({pending:e})}},{key:"render",value:function(){return i.a.createElement(f.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(p.a,{caret:!0},"Commands"),i.a.createElement(v.a,null,i.a.createElement(m.a,{header:!0},"Requests"),i.a.createElement(m.a,{divider:!0}),i.a.createElement(m.a,{onClick:this.findAllUsers.bind(this)},"Find All Users")))}}]),t}(i.a.Component),E=n(52),g=n(48),j=n(49),C=n(50),w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,header:null,body:null,footer:null},n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.on("modal",function(t){var n=t.header,a=void 0===n?null:n,i=t.body,c=void 0===i?null:i,s=t.footer,o=void 0===s?null:s;e.setState({header:a,body:c,footer:o,isOpen:!0})})}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return i.a.createElement(E.a,{isOpen:this.state.isOpen,toggle:this.toggle.bind(this)},i.a.createElement(g.a,{toggle:this.toggle.bind(this)},this.state.header),i.a.createElement(j.a,null,this.state.body),i.a.createElement(C.a,null,this.state.footer))}}]),t}(i.a.Component),R=(n(41),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).outputRef=i.a.createRef(),n.inputRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.on("connected",function(){return e.updateChat("Connected to server.")}),k.on("close",function(){return e.updateChat("Lost connection.")}),k.on("pin",function(){return e.updateChat("PIN = ".concat(k.pin))}),k.on("chat",function(t){return e.updateChat(t.text,t.from)}),this.updateChat("Connecting..."),k.connect()}},{key:"updateChat",value:function(e,t){var n=this.outputRef.current,a=t?"".concat(t,": ").concat(e):e;n.value?(n.value="".concat(n.value,"\n").concat(a),n.scrollTop=n.scrollHeight):n.value=a}},{key:"onInput",value:function(e){var t=this.inputRef.current.value;t&&13===e.keyCode&&(k.sendChat(t),this.inputRef.current.value="")}},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("header",null,i.a.createElement("h1",{className:"text-center"},"Electron Chat")),i.a.createElement("br",null),i.a.createElement(d.a,null,i.a.createElement("div",{className:"chat"},i.a.createElement("textarea",{ref:this.outputRef,readOnly:!0}),i.a.createElement("br",null),i.a.createElement("input",{ref:this.inputRef,type:"text",onKeyUp:this.onInput.bind(this)})),i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement(y,null))),i.a.createElement(w,null))}}]),t}(i.a.Component));n(43);s.a.render(i.a.createElement(R,null),document.querySelector("#root"))}},[[27,2,1]]]);
//# sourceMappingURL=main.49a4560e.chunk.js.map